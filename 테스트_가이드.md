# 🧪 Upbit DCA Trader 테스트 가이드

**초보자를 위한 완벽 가이드** - 컴퓨터를 잘 모르는 분도 따라할 수 있습니다!

---

## 📋 목차

1. [사전 준비](#1-사전-준비)
2. [Python 설치 확인](#2-python-설치-확인)
3. [프로그램 파일 준비](#3-프로그램-파일-준비)
4. [필요한 프로그램 설치](#4-필요한-프로그램-설치)
5. [Upbit API 키 발급](#5-upbit-api-키-발급)
6. [테스트 1: API 키 저장](#6-테스트-1-api-키-저장)
7. [테스트 2: API 연결 테스트](#7-테스트-2-api-연결-테스트)
8. [테스트 3: 상세 기능 테스트](#8-테스트-3-상세-기능-테스트)
9. [문제 해결](#9-문제-해결)

---

## 1. 사전 준비

### 필요한 것들
- ✅ Windows 10 이상 (또는 Mac, Linux)
- ✅ 인터넷 연결
- ✅ Upbit 계정 (실제 거래소 계정)
- ✅ 약 30분~1시간의 시간

### ⚠️ 주의사항
- 이 테스트는 **실제 Upbit 계정**에 연결됩니다
- **소액**으로만 테스트하세요 (예: 1만원)
- API 키는 **절대 다른 사람에게 공유하지 마세요**

---

## 2. Python 설치 확인

### 2-1. 명령 프롬프트 열기 (Windows)

**방법 1**: 시작 메뉴 이용
1. 키보드에서 `Windows 키` 누르기
2. "cmd" 또는 "명령 프롬프트" 입력
3. **명령 프롬프트** 클릭

**방법 2**: 실행 창 이용
1. `Windows 키 + R` 동시에 누르기
2. "cmd" 입력하고 Enter

### 2-2. Python 설치 확인

명령 프롬프트에 다음을 입력하고 Enter:

```
python --version
```

**예상 결과**:
```
Python 3.10.0
```
(버전 번호는 다를 수 있습니다)

### ❌ 만약 "python을 찾을 수 없습니다" 오류가 나면?

#### Python 설치하기

1. 웹브라우저에서 https://www.python.org/downloads/ 접속
2. 노란색 **Download Python** 버튼 클릭
3. 다운로드된 파일 실행
4. ⚠️ **중요**: 체크박스 **"Add Python to PATH"** 반드시 체크!
5. **Install Now** 클릭
6. 설치 완료 후 명령 프롬프트를 **다시 열고** 재시도

---

## 3. 프로그램 파일 준비

### 3-1. 프로젝트 폴더로 이동

명령 프롬프트에서 다음을 입력:

```
cd D:\claude-project12\upbit_dca_trader
```

**설명**:
- `cd`는 "Change Directory"의 약자 (폴더 이동 명령)
- 프로젝트가 다른 위치에 있으면 그 경로를 입력하세요

**확인하기**:
명령 프롬프트가 이렇게 바뀌어야 합니다:
```
D:\claude-project12\upbit_dca_trader>
```

### 3-2. 파일 목록 확인

```
dir
```

**예상 결과**: 다음 파일들이 보여야 합니다
- `api` (폴더)
- `utils` (폴더)
- `main.py`
- `requirements.txt`
- `README.md`
- 등등...

---

## 4. 필요한 프로그램 설치

### 4-1. 필수 패키지 설치

명령 프롬프트에 다음을 **한 줄씩** 입력:

```
pip install -r requirements.txt
```

**진행 상황**:
- 화면에 많은 텍스트가 스크롤됩니다
- "Successfully installed..." 메시지가 나오면 성공!
- 약 1~3분 소요

**예상 출력**:
```
Collecting PySide6>=6.6.0
Downloading PySide6-6.6.1-...
...
Successfully installed PySide6-6.6.1 requests-2.31.0 ...
```

### ❌ 오류가 발생하면?

**"pip를 찾을 수 없습니다" 오류**:
```
python -m pip install -r requirements.txt
```

**"권한이 없습니다" 오류**:
```
pip install --user -r requirements.txt
```

---

## 5. Upbit API 키 발급

### 5-1. Upbit 웹사이트 접속

1. 웹브라우저에서 https://upbit.com 접속
2. 로그인
3. 우측 상단 **내 정보** → **Open API 관리** 클릭

또는 직접 접속: https://upbit.com/mypage/open_api_management

### 5-2. API 키 생성

#### Step 1: 새 API 키 추가
1. **Open API 키 발급** 버튼 클릭

#### Step 2: 권한 설정
다음 권한을 체크하세요:
- ✅ **자산 조회** (필수)
- ✅ **주문 조회** (필수)
- ✅ **주문하기** (실거래 테스트 시)
- ❌ **출금하기** (체크 해제 - 보안상)

#### Step 3: IP 주소 제한 (선택사항)
- 집 IP 주소만 허용하면 더 안전
- 모든 IP 허용도 가능 (테스트 용도)

#### Step 4: OTP 인증
- 휴대폰 OTP 앱에서 6자리 숫자 입력

#### Step 5: API 키 복사
- **Access Key**: `ABCD1234...` (약 20자)
- **Secret Key**: `xyz789...` (약 40자)
- ⚠️ **중요**: Secret Key는 한 번만 보여줍니다!
- 메모장에 복사해두세요 (안전한 곳에만!)

### 📝 API 키 형식 예시
```
Access Key: ABCD1234EFGH5678IJKL
Secret Key: xyz789abc123def456ghi789jkl012mno345pqr
```

---

## 6. 테스트 1: API 키 저장

### 6-1. API 키 저장 프로그램 실행

명령 프롬프트에서:

```
python main.py --save-keys
```

### 6-2. API 키 입력

#### Access Key 입력
```
Access Key:
```
→ 복사한 Access Key를 **마우스 오른쪽 버튼 클릭** → 붙여넣기
→ Enter

#### Secret Key 입력
```
Secret Key (입력 내용 숨김):
```
→ Secret Key를 붙여넣기 (화면에 안 보이는 게 정상!)
→ Enter

#### 추가 패스워드 설정 (선택)
```
추가 패스워드를 설정하시겠습니까? (y/N):
```
→ 처음엔 `N` 입력 후 Enter (나중에 설정 가능)

### 6-3. 성공 확인

**성공 메시지**:
```
✅ API 키가 안전하게 저장되었습니다.
📁 저장 위치: D:\claude-project12\upbit_dca_trader\data\config\.credentials.enc
```

### ❌ 오류가 나면?

**"API 키 형식이 올바르지 않을 수 있습니다"**:
- API 키를 다시 확인하세요
- 공백이 들어가지 않았는지 확인
- 복사/붙여넣기를 다시 시도

---

## 7. 테스트 2: API 연결 테스트

### 7-1. 헤드리스 모드 실행

명령 프롬프트에서:

```
python main.py --headless
```

### 7-2. 예상 출력

**성공 시**:
```
2025-01-15 14:30:00 - INFO - ============================================================
2025-01-15 14:30:00 - INFO - Upbit DCA Auto-Trading Program
2025-01-15 14:30:00 - INFO - ============================================================
2025-01-15 14:30:00 - INFO - ⚙️ 헤드리스 모드 시작
2025-01-15 14:30:00 - INFO -    - 전략: dca_rsi
2025-01-15 14:30:00 - INFO -    - 심볼: KRW-BTC
2025-01-15 14:30:00 - INFO -    - 드라이런: False
2025-01-15 14:30:01 - INFO - ✅ API 연결 성공
2025-01-15 14:30:01 - INFO - 📊 계좌 정보: 3개 자산
2025-01-15 14:30:01 - INFO -    - KRW: 50,000.00
2025-01-15 14:30:01 - INFO -    - BTC: 0.00123456
2025-01-15 14:30:01 - INFO -    - ETH: 0.0456
```

**설명**:
- ✅ API 연결 성공: Upbit 서버와 통신 OK
- 📊 계좌 정보: 실제 내 Upbit 계좌의 자산 표시
- 금액과 수량은 실제 보유량이 나옵니다

### ❌ 실패 시

**"저장된 API 키가 없습니다"**:
```
❌ 저장된 API 키가 없습니다.
다음 명령으로 API 키를 저장하세요:
  python main.py --save-keys
```
→ 테스트 1로 돌아가서 API 키 저장 다시 하기

**"API 연결 실패"**:
```
❌ API 연결 실패
```
→ API 키가 잘못되었거나, Upbit 서버 문제
→ Upbit 웹사이트에서 API 키 재확인

---

## 8. 테스트 3: 상세 기능 테스트

### 8-1. 테스트 스크립트 준비

`test_api.py` 파일을 열어야 합니다.

#### Windows 메모장으로 열기:
1. 명령 프롬프트에서:
```
notepad test_api.py
```

2. 파일 상단에 다음 부분을 찾습니다:
```python
# =====================================================
# 테스트 설정
# =====================================================

# API 키 입력 (테스트용)
ACCESS_KEY = ""  # Upbit Access Key
SECRET_KEY = ""  # Upbit Secret Key
```

3. 빈 문자열 `""` 안에 API 키를 입력:
```python
ACCESS_KEY = "여기에_Access_Key_붙여넣기"
SECRET_KEY = "여기에_Secret_Key_붙여넣기"
```

4. **Ctrl + S**로 저장
5. 메모장 닫기

### 8-2. 상세 테스트 실행

명령 프롬프트에서:

```
python test_api.py
```

### 8-3. 예상 출력

```
=== Upbit API 연결 테스트 ===

1️⃣ 연결 테스트
   ✅ API 연결 성공

2️⃣ 계좌 조회
   총 자산 수: 3개
   KRW: 50000.00 (평가액: 50000원)
   BTC: 0.00123456 (평가액: 85000원)
   ETH: 0.0456 (평가액: 120000원)

3️⃣ KRW 잔고 확인
   보유 KRW: 50000.00원

4️⃣ 마켓 코드 조회
   총 마켓 수: 342개
   처음 5개:
   - KRW-BTC
   - KRW-ETH
   - KRW-XRP
   - KRW-ADA
   - KRW-DOGE

5️⃣ BTC 현재가 조회
   BTC 현재가: 68,500,000원

6️⃣ BTC 1분봉 캔들 조회 (최근 10개)
   2025-01-15 14:30:00 - 시가: 68500000, 고가: 68520000, 저가: 68480000, 종가: 68510000
   2025-01-15 14:29:00 - 시가: 68490000, 고가: 68505000, 저가: 68470000, 종가: 68500000
   ...

7️⃣ 대기 중인 주문 조회
   대기 중인 주문: 0개

=== 테스트 완료 ===
```

### 8-4. 테스트 완료 후 처리

⚠️ **보안을 위해** `test_api.py` 파일에서 API 키를 **삭제**하세요!

```
notepad test_api.py
```

API 키 부분을 다시 빈 문자열로:
```python
ACCESS_KEY = ""
SECRET_KEY = ""
```

저장하고 닫기.

---

## 9. 문제 해결

### 일반적인 오류

#### 1. "python을 찾을 수 없습니다"
**해결**:
```
python3 main.py --save-keys
```
또는 Python 재설치 (PATH 옵션 체크)

#### 2. "pip를 찾을 수 없습니다"
**해결**:
```
python -m pip install -r requirements.txt
```

#### 3. "모듈을 찾을 수 없습니다" (예: ModuleNotFoundError)
**해결**:
```
pip install --upgrade -r requirements.txt
```

#### 4. "API 키가 잘못되었습니다"
**확인사항**:
- Upbit에서 API 키가 활성화 상태인지 확인
- IP 주소 제한이 있다면 현재 IP가 허용되었는지 확인
- API 키 복사 시 공백이 포함되지 않았는지 확인

#### 5. "Rate Limit 초과"
**의미**: 너무 많은 요청을 보냄
**해결**: 1분 후 다시 시도

### 추가 도움

#### 로그 파일 확인
프로그램 실행 중 오류가 발생하면:
1. `logs/` 폴더로 이동
2. `upbit_dca.log` 파일 열기
3. 가장 최근 오류 메시지 확인

명령 프롬프트에서:
```
type logs\upbit_dca.log
```

---

## ✅ 테스트 완료 체크리스트

테스트가 성공적으로 완료되었다면:

- [ ] Python 설치 확인됨
- [ ] 필수 패키지 설치 완료
- [ ] Upbit API 키 발급 완료
- [ ] API 키 안전하게 저장 완료
- [ ] API 연결 테스트 성공
- [ ] 계좌 정보 조회 성공
- [ ] 현재가 조회 성공
- [ ] `test_api.py`에서 API 키 제거 완료

**모든 체크리스트 완료 시**: Phase 1이 완벽하게 작동합니다! 🎉

---

## 📞 추가 질문이 있으면?

- README.md 참고
- 오류 메시지를 정확히 복사해서 질문
- 로그 파일 내용 첨부

---

**작성일**: 2025-01-15
**버전**: Phase 1 테스트 가이드 v1.0
