# 다음 계획 - Phase 3.8 완료 후

## 📊 현재 상황

### ✅ 완료된 항목 (Phase 3.8):
- **핵심 컴포넌트**: WebSocket, Buffer, Strategy, Risk, Order, Telegram
- **Trading Engine**: DCA, 분할 익절/손절, 신호 감지
- **Multi-Coin Trading**: 다중 코인 병렬 트레이딩 (동일 비중 분산)
- **GUI 통합**: MainWindow, MultiCoinWorker, CoinSelectionDialog
- **실시간 로그**: 트레이딩 로그 GUI 표시
- **안전한 종료**: QThread 정리, graceful shutdown
- **활성 포지션 테이블**: 실시간 포지션 현황 표시
- **손익률 계산 수정**: 정확한 손익 계산 및 표시

### 🔄 진행 중:
- **페이퍼 트레이딩 검증**: 분할 익절/손절 동작 확인 중

---

## 🎯 검증 중인 항목

### 페이퍼 트레이딩 검증 항목:
- [ ] **분할 익절 (Multi-level TP)**: 각 레벨별 부분 익절 정상 작동
- [ ] **분할 손절 (Multi-level SL)**: 각 레벨별 부분 손절 정상 작동
- [ ] **DCA 추가매수**: signal_price 기준 레벨별 추가매수
- [ ] **평균 단가 계산**: 추가매수 시 평균가 정확히 업데이트
- [ ] **포지션 수량 관리**: 익절/손절 시 정확한 수량 계산
- [ ] **다중 코인 독립 실행**: 각 코인별 독립적 전략 실행
- [ ] **WebSocket 안정성**: 장기 연결 유지 및 재연결
- [ ] **GUI 응답성**: 장시간 실행 시 프리징 없음

**검증 완료 시점**: 사용자 확인 후 다음 단계 진행

---

## 🚀 검증 완료 후 선택지

### 우선순위 1: 실거래 준비 (Phase 4.0) 💰
**목표**: 페이퍼 트레이딩 → 실거래 전환

**구현 내용**:
1. **실거래 모드 UI**
   - "실거래 모드" 체크박스 (기본: 비활성화)
   - 다중 확인 다이얼로그 (실수 방지)
   - 주문 금액 설정 및 검증

2. **안전 장치**
   - 일일 손실 한도 설정
   - 최대 거래 횟수 제한
   - 긴급 중지 버튼 강화

3. **백업 및 로깅**
   - 모든 거래 기록 DB 저장
   - 자동 백업 시스템
   - 상세 로그 파일 (거래별 기록)

4. **소액 실거래 테스트**
   - 최소 금액(5,000원)으로 시작
   - 1-2주 테스트 운영
   - 수익성 및 안정성 검증

**예상 시간**: 5-7일

---

### 우선순위 2: 백테스팅 시스템 📊
**목표**: 과거 데이터로 전략 검증

**구현 내용**:
1. **과거 데이터 수집**
   - Upbit API로 과거 1분봉 데이터 수집
   - 데이터 저장 및 관리

2. **백테스트 엔진**
   - 과거 데이터 재생
   - 전략 시뮬레이션
   - 성과 계산 (수익률, MDD, 승률)

3. **파라미터 최적화**
   - 볼린저 밴드 기간, 표준편차 배수
   - 익절/손절 레벨 비율
   - DCA 레벨 간격

4. **백테스트 결과 리포트**
   - 총 수익률, MDD, 샤프 비율
   - 거래 횟수, 승률, 손익비
   - 차트 시각화

**예상 시간**: 4-6일

---

### 우선순위 3: 수동 자산 배분 (Multi-Coin Enhancement) 🎯
**목표**: 코인별 투자 비중 수동 설정

**현재 상태**:
- 다중 코인 트레이딩 구현됨
- 자본 균등 분배 (예: 3개 코인 → 각 33.3%)

**구현 내용**:
1. **자산 배분 UI**
   - 코인 선택 시 비중 입력 (%)
   - 합계 100% 검증
   - 슬라이더 또는 입력 필드

2. **배분 로직 수정**
   - `MultiCoinTrader.__init__()`: 비중 파라미터 추가
   - `capital_per_coin` 계산 로직 변경
   - 설정 저장/로드

3. **UI 표시**
   - 각 코인별 할당 자본 표시
   - 실시간 비중 조정 기능

**예상 시간**: 2-3일

---

### 우선순위 4: 실시간 상태 개선 (Phase 3.9) 📈
**목표**: GUI 실시간 정보 강화

**구현 내용**:
1. **실시간 가격 표시**
   - 현재가, 변동률, 변동금액
   - 10초마다 업데이트

2. **수익률 실시간 계산**
   - 포지션 보유 중: 미실현 손익
   - 총 수익률: 전체 거래 누적

3. **MDD (최대 낙폭) 계산**
   - 실시간 MDD 추적
   - 고점 대비 낙폭 표시

4. **포지션 상태 강화**
   - 평균 단가 표시
   - 진입 시각
   - 보유 수량

**예상 시간**: 2-3시간

---

### 우선순위 5: UI 개선 (Phase 3.9.5) 🎨
**목표**: 사용자 경험 향상

**구현 내용**:
- [ ] **평균 단가 표시**: 포지션 테이블에 평균가 컬럼 추가
- [ ] **빈 테이블 메시지**: 포지션 없을 때 "포지션 없음" 표시
- [ ] **컨텍스트 메뉴**: 우클릭으로 강제 청산 옵션
- [ ] **색상 강도**: 수익률에 따라 색상 진하기 조절
- [ ] **정렬 기능**: 수익률, 코인명 정렬
- [ ] **필터 기능**: 수익/손실만 표시

**예상 시간**: 2-3시간

---

## 📅 권장 진행 순서

### 검증 완료 직후:
1. **실거래 준비 (Phase 4.0)** - 수익 창출 시작
2. **백테스팅 시스템** - 전략 검증 및 최적화
3. **수동 자산 배분** - 투자 전략 세밀화
4. **실시간 상태 개선** - 사용자 경험 향상
5. **UI 개선** - 편의성 강화

### 또는 안전 우선 순서:
1. **백테스팅 시스템** - 전략 검증 먼저
2. **실거래 준비 (Phase 4.0)** - 검증 후 실거래
3. **수동 자산 배분** - 리스크 분산
4. **실시간 상태 개선** - 모니터링 강화
5. **UI 개선** - 편의성 강화

---

## 💡 개발 방향성

### 현재 프로젝트 강점:
- **매우 견고한 아키텍처** ✅
- **완전한 페이퍼 트레이딩** ✅
- **다중 코인 병렬 처리** ✅
- **분할 익절/손절 시스템** ✅
- **DCA 추가매수 시스템** ✅
- **GUI 통합 완료** ✅
- **Telegram 알림** ✅

### 검증 후 가능한 방향:
- **빠른 수익화**: 실거래 준비 → 소액 테스트 → 점진적 증액
- **안전한 검증**: 백테스팅 → 최적화 → 실거래 준비
- **고급 기능**: 수동 배분 → UI 개선 → 차트 통합

---

## 🚨 주의사항

1. **절대 서두르지 말 것**
   - 페이퍼 트레이딩 검증 완료 필수
   - 실거래 전 충분한 테스트

2. **안전 우선**
   - 손실 한도 설정
   - 긴급 중지 메커니즘
   - 백업 시스템

3. **단계적 접근**
   - 페이퍼 → 소액 실거래 → 점진적 증액
   - 검증 → 개선 → 재검증

4. **데이터 백업**
   - 모든 거래 기록
   - 설정 파일
   - 성과 데이터

---

## 📞 대기 중

**현재 상태**: 페이퍼 트레이딩 검증 진행 중

**검증 완료 후 사용자에게 확인**:
- 분할 익절/손절 정상 작동 여부
- 다음 우선순위 선택:
  - A) 실거래 준비
  - B) 백테스팅 시스템
  - C) 수동 자산 배분
  - D) UI 개선

**검증이 완료되면 알려주세요!** 🚀
