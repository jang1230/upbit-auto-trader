# GUI 테스트 가이드 - Phase 3.7

## 개요

Upbit DCA Trader GUI의 모든 기능을 체계적으로 테스트하는 가이드입니다.

---

## 사전 준비

### 필수 정보 준비:
1. **Upbit API 키**
   - Access Key (20자 이상)
   - Secret Key (20자 이상)

2. **Telegram 정보** (선택사항)
   - Bot Token (예: `123456789:ABC-DEF1234...`)
   - Chat ID (숫자 또는 -로 시작하는 숫자)

### 프로그램 실행:
```bash
cd /mnt/d/claude-project12/upbit_dca_trader
python main.py
```

---

## 테스트 영역

## 1. 프로그램 시작 테스트

### 1-1. GUI 실행 확인
- **테스트**: 프로그램 실행 시 GUI 창이 정상적으로 표시되는가?
- **기대 결과**:
  - "Upbit DCA Trader" 제목의 창 표시
  - 최소 크기: 800x600
  - 상태 패널 + 계좌 정보 패널 + 로그 패널 표시

### 1-2. 초기 로그 확인
- **테스트**: 로그 패널에 초기 메시지가 표시되는가?
- **기대 결과**:
  ```
  [HH:MM:SS] Upbit DCA Trader GUI 시작
  [HH:MM:SS] 설정 메뉴에서 API 키와 Telegram을 설정하세요
  ```

### 1-3. 메뉴바 확인
- **테스트**: 메뉴바에 "파일", "설정", "도움말" 메뉴가 있는가?
- **기대 결과**: 3개 메뉴 모두 표시됨

---

## 2. 설정 다이얼로그 테스트

### 2-1. 설정 창 열기
- **테스트**: 메뉴 > 설정 > ⚙️ 환경 설정 클릭
- **기대 결과**:
  - 설정 다이얼로그 창 열림
  - 3개 탭 표시: "📡 Upbit API", "📱 Telegram", "💱 거래 설정"

---

## 📡 Upbit API 설정 테스트

### 2-2. API 키 입력 테스트
- **테스트**:
  1. "📡 Upbit API" 탭 선택
  2. Access Key 입력 필드에 API 키 입력
  3. Secret Key 입력 필드에 API 키 입력
- **기대 결과**:
  - 입력 필드가 비밀번호 모드 (****로 표시)
  - 입력이 정상적으로 됨

### 2-3. API 키 표시 버튼 테스트
- **테스트**:
  1. Access Key 아래 "👁️ 표시" 버튼 클릭
  2. Secret Key 아래 "👁️ 표시" 버튼 클릭
- **기대 결과**:
  - 버튼 클릭 시 키가 평문으로 표시됨
  - 다시 클릭 시 ****로 숨겨짐

### 2-4. API 키 형식 검증 테스트
- **테스트**:
  1. Access Key에 짧은 문자열 입력 (예: "test")
  2. Secret Key에 짧은 문자열 입력 (예: "test")
  3. "🔍 연결 테스트" 버튼 클릭
- **기대 결과**:
  - "형식 오류" 경고창 표시
  - "API 키 형식이 올바르지 않습니다" 메시지

### 2-5. API 키 빈 값 검증 테스트
- **테스트**:
  1. Access Key와 Secret Key를 비워둠
  2. "🔍 연결 테스트" 버튼 클릭
- **기대 결과**:
  - "입력 오류" 경고창 표시
  - "Access Key와 Secret Key를 입력하세요" 메시지

### 2-6. API 연결 테스트 ✅ (버그 수정됨)
- **테스트**:
  1. 올바른 Upbit API 키 입력
  2. "🔍 연결 테스트" 버튼 클릭
- **기대 결과**:
  - ✅ "연결 성공" 다이얼로그 표시
  - "Upbit API 연결 성공!" 메시지
  - "계좌 정보: N개 자산 조회됨" 표시
  - ❌ 에러 없음 (이전 버그: 'close' attribute error 해결됨)

### 2-7. API 설정 저장 테스트
- **테스트**:
  1. 올바른 API 키 입력
  2. "💾 저장" 버튼 클릭
- **기대 결과**:
  - "저장 완료" 다이얼로그 표시
  - "모든 설정이 저장되었습니다" 메시지
  - ".env 파일에 저장되었습니다" 표시
  - 설정 다이얼로그 자동 닫힘
  - 메인 창 로그에 "✅ 설정이 저장되었습니다" 표시

### 2-8. .env 파일 확인
- **테스트**: 프로젝트 루트의 `.env` 파일 열기
- **기대 결과**:
  ```
  UPBIT_ACCESS_KEY=입력한_값
  UPBIT_SECRET_KEY=입력한_값
  ```

---

## 📱 Telegram 설정 테스트

### 2-9. Telegram 설정 창 열기
- **테스트**: "📱 Telegram" 탭 클릭
- **기대 결과**:
  - Bot Token 입력 필드 표시
  - Chat ID 입력 필드 표시
  - 설정 가이드 안내문 표시
  - "📱 알림 테스트 전송" 버튼 표시

### 2-10. Telegram Bot Token 입력 테스트
- **테스트**:
  1. Bot Token 입력 필드에 토큰 입력
  2. "👁️ 표시" 버튼 클릭
- **기대 결과**:
  - 입력 필드가 비밀번호 모드
  - "👁️ 표시" 버튼으로 토글 가능

### 2-11. Telegram Chat ID 입력 테스트
- **테스트**: Chat ID 입력 필드에 숫자 입력
- **기대 결과**: 평문으로 표시됨 (비밀번호 모드 아님)

### 2-12. Telegram 형식 검증 테스트
- **테스트**:
  1. Bot Token에 잘못된 형식 입력 (예: "test123")
  2. "📱 알림 테스트 전송" 버튼 클릭
- **기대 결과**:
  - "형식 오류" 경고창
  - "Bot Token 형식이 올바르지 않습니다" 메시지

### 2-13. Telegram 빈 값 검증 테스트
- **테스트**:
  1. Bot Token과 Chat ID를 비워둠
  2. "📱 알림 테스트 전송" 버튼 클릭
- **기대 결과**:
  - "입력 오류" 경고창
  - "Bot Token과 Chat ID를 입력하세요" 메시지

### 2-14. Telegram 알림 테스트 (선택사항)
- **테스트**:
  1. 올바른 Bot Token과 Chat ID 입력
  2. "📱 알림 테스트 전송" 버튼 클릭
- **기대 결과**:
  - "전송 성공" 다이얼로그 표시
  - Telegram 앱에서 테스트 메시지 수신
  - 메시지 내용: "🧪 테스트 메시지 / Upbit DCA Trader GUI에서 전송..."

### 2-15. Telegram 설정 저장 테스트
- **테스트**:
  1. Bot Token과 Chat ID 입력
  2. "💾 저장" 버튼 클릭
- **기대 결과**:
  - "저장 완료" 다이얼로그
  - .env 파일에 TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID 저장됨

---

## 💱 거래 설정 테스트

### 2-16. 거래 설정 탭 열기
- **테스트**: "💱 거래 설정" 탭 클릭
- **기대 결과**:
  - "최소 주문 금액" 스핀박스 표시 (기본값: 5000원)
  - "주문 타임아웃" 스핀박스 표시 (기본값: 30초)
  - 설정 안내문 표시

### 2-17. 최소 주문 금액 조정 테스트
- **테스트**:
  1. 최소 주문 금액 스핀박스 클릭
  2. 값 변경 (예: 10000원)
- **기대 결과**:
  - 값이 1000원 단위로 변경됨
  - 범위: 5,000원 ~ 10,000,000원

### 2-18. 주문 타임아웃 조정 테스트
- **테스트**:
  1. 주문 타임아웃 스핀박스 클릭
  2. 값 변경 (예: 60초)
- **기대 결과**:
  - 값이 5초 단위로 변경됨
  - 범위: 10초 ~ 300초

### 2-19. 거래 설정 저장 테스트
- **테스트**:
  1. 값 변경 후 "💾 저장" 버튼 클릭
- **기대 결과**:
  - "저장 완료" 다이얼로그
  - .env 파일에 MIN_ORDER_AMOUNT, ORDER_TIMEOUT 저장됨

### 2-20. 취소 버튼 테스트
- **테스트**:
  1. 값 변경
  2. "취소" 버튼 클릭
- **기대 결과**:
  - 설정 다이얼로그 닫힘
  - 변경 사항 저장 안 됨
  - 메인 창 로그에 아무 메시지 없음

---

## 3. 메인 창 기능 테스트

### 3-1. 상태 패널 확인
- **테스트**: 메인 창 좌측 상태 패널 확인
- **기대 결과**:
  - "● 중지됨" 상태 표시 (빨간색)
  - "심볼: KRW-BTC" 표시
  - "가격: -" 표시 (실행 전)
  - "▶ 시작" 버튼 활성화 (녹색)
  - "■ 중지" 버튼 비활성화 (회색)

### 3-2. 계좌 정보 패널 확인
- **테스트**: 메인 창 우측 계좌 정보 패널 확인
- **기대 결과**:
  - "총 자산: -" 표시 (새로고침 전)
  - "수익률: -" 표시
  - "최대 낙폭: -" 표시
  - "🔄 새로고침" 버튼 표시

### 3-3. 새로고침 버튼 테스트 (API 키 없음)
- **테스트**:
  1. API 키 설정하지 않은 상태
  2. "🔄 새로고침" 버튼 클릭
- **기대 결과**:
  - "설정 오류" 경고창 표시
  - "API 키가 설정되지 않았습니다" 메시지
  - 설정 메뉴로 안내

### 3-4. 새로고침 버튼 테스트 (API 키 설정됨) ✅ (버그 수정됨)
- **테스트**:
  1. API 키 설정 완료 (2-7번 완료)
  2. "🔄 새로고침" 버튼 클릭
- **기대 결과**:
  - ✅ 버튼 즉시 비활성화
  - ✅ 로그에 "🔄 계좌 정보 조회 중..." 표시
  - ✅ GUI 응답 유지 (프리징 없음!)
  - ✅ 1-2초 후 잔고 정보 표시:
    ```
    [HH:MM:SS] 🔄 계좌 정보 조회 중...
    [HH:MM:SS] ✅ 총 자산: XXX,XXX원
    [HH:MM:SS]    BTC: 0.00000000 (BTC 보유 시)
    ```
  - ✅ "총 자산: XXX,XXX원" UI 업데이트
  - ✅ 버튼 다시 활성화

### 3-5. 새로고침 중복 클릭 방지 테스트
- **테스트**:
  1. "🔄 새로고침" 버튼 클릭
  2. 응답 오기 전에 다시 클릭
- **기대 결과**:
  - 버튼 비활성화 상태라 클릭 안 됨
  - 로그에 "⏳ 이미 계좌 정보를 조회 중입니다..." 표시

### 3-6. 로그 클리어 테스트
- **테스트**: "🗑️ 로그 지우기" 버튼 클릭
- **기대 결과**:
  - 로그 패널의 모든 내용 삭제됨
  - 깨끗한 상태로 초기화

### 3-7. 로그 자동 스크롤 테스트
- **테스트**:
  1. 여러 번 새로고침 클릭 (로그 많이 쌓기)
  2. 새 로그 추가 시 스크롤 위치 확인
- **기대 결과**:
  - 새 로그가 추가되면 자동으로 최하단 스크롤
  - 최신 로그가 항상 보임

---

## 4. 트레이딩 제어 테스트

### 4-1. 시작 버튼 클릭 (API 키 없음)
- **테스트**:
  1. API 키 설정 안 함
  2. "▶ 시작" 버튼 클릭
- **기대 결과**:
  - "설정 오류" 경고창
  - "Upbit API 키가 설정되지 않았거나 유효하지 않습니다" 메시지
  - 설정 다이얼로그 자동 열림

### 4-2. 시작 버튼 클릭 (Telegram 미설정)
- **테스트**:
  1. API 키만 설정 (Telegram 미설정)
  2. "▶ 시작" 버튼 클릭
- **기대 결과**:
  - "Telegram 미설정" 확인창
  - "알림을 받을 수 없습니다. 그래도 계속하시겠습니까?" 메시지
  - "예"/"아니오" 선택 가능

### 4-3. 시작 버튼 클릭 (정상)
- **테스트**:
  1. API 키 설정 완료
  2. "▶ 시작" 버튼 클릭
  3. 확인 다이얼로그에서 "예" 클릭
- **기대 결과**:
  - 로그에 다음 메시지들 표시:
    ```
    [HH:MM:SS] ==================================================
    [HH:MM:SS] 🚀 트레이딩 시작
    [HH:MM:SS] ==================================================
    [HH:MM:SS] ⚠️ 페이퍼 트레이딩 모드 (Dry Run)
    [HH:MM:SS]
    [HH:MM:SS] 📊 WebSocket 연결 중...
    [HH:MM:SS] 📦 데이터 버퍼 초기화...
    [HH:MM:SS] ✅ 시스템 준비 완료
    [HH:MM:SS]
    [HH:MM:SS] 💡 실제 트레이딩 기능은 Phase 3.8에서 통합됩니다
    ```
  - 상태 라벨: "● 실행 중" (녹색)
  - "▶ 시작" 버튼 비활성화
  - "■ 중지" 버튼 활성화
  - 상태바: "트레이딩 실행 중..."

### 4-4. 중지 버튼 클릭
- **테스트**:
  1. 트레이딩 실행 중 (4-3번 후)
  2. "■ 중지" 버튼 클릭
  3. 확인 다이얼로그에서 "예" 클릭
- **기대 결과**:
  - 로그에 메시지 표시:
    ```
    [HH:MM:SS]
    [HH:MM:SS] ==================================================
    [HH:MM:SS] ■ 트레이딩 중지
    [HH:MM:SS] ==================================================
    [HH:MM:SS] ✅ 트레이딩 중지 완료
    ```
  - 상태 라벨: "● 중지됨" (빨간색)
  - "▶ 시작" 버튼 활성화
  - "■ 중지" 버튼 비활성화
  - 상태바: "트레이딩 중지됨"

### 4-5. 중지 확인 취소 테스트
- **테스트**:
  1. 트레이딩 실행 중
  2. "■ 중지" 버튼 클릭
  3. 확인 다이얼로그에서 "아니오" 클릭
- **기대 결과**:
  - 트레이딩 계속 실행
  - 상태 변경 없음

---

## 5. 메뉴 기능 테스트

### 5-1. 파일 > 종료 메뉴 테스트
- **테스트**: 메뉴 > 파일 > 종료 클릭
- **기대 결과**:
  - 프로그램 종료
  - (트레이딩 실행 중이면 확인 다이얼로그 표시)

### 5-2. 파일 > 종료 단축키 테스트
- **테스트**: Ctrl+Q 키 입력
- **기대 결과**:
  - 프로그램 종료
  - (트레이딩 실행 중이면 확인 다이얼로그 표시)

### 5-3. 설정 > 환경 설정 메뉴 테스트
- **테스트**: 메뉴 > 설정 > ⚙️ 환경 설정 클릭
- **기대 결과**:
  - 설정 다이얼로그 열림 (2번 테스트와 동일)

### 5-4. 도움말 > 정보 메뉴 테스트
- **테스트**: 메뉴 > 도움말 > ℹ️ 정보 클릭
- **기대 결과**:
  - "Upbit DCA Trader" 정보 다이얼로그 표시
  - 버전: 1.0.0 (Phase 3.7)
  - 전략: 볼린저 밴드 (20, 2.5)
  - 리스크 관리: 손절 -5%, 익절 +10%
  - 개발자: Claude Code AI Assistant
  - 라이선스: MIT

---

## 6. 설정 변경 및 재로드 테스트

### 6-1. 설정 변경 후 재로드 확인
- **테스트**:
  1. 메뉴 > 설정 > 환경 설정 열기
  2. API 키 변경 후 저장
  3. 메인 창 확인
- **기대 결과**:
  - 로그에 "✅ 설정이 저장되었습니다" 표시
  - 로그에 "📝 설정이 다시 로드되었습니다" 표시

### 6-2. .env 파일 직접 수정 후 재로드 테스트
- **테스트**:
  1. 프로그램 종료
  2. .env 파일 직접 수정
  3. 프로그램 재실행
  4. 설정 다이얼로그 열기
- **기대 결과**:
  - 수정한 값이 GUI에 정상 표시됨

---

## 7. 예외 상황 테스트

### 7-1. 잘못된 API 키로 새로고침
- **테스트**:
  1. 설정에서 잘못된 API 키 저장
  2. 새로고침 버튼 클릭
- **기대 결과**:
  - 로그에 "❌ 계좌 조회 실패: ..." 표시
  - "조회 실패" 경고창 표시
  - 버튼 다시 활성화

### 7-2. 트레이딩 실행 중 종료 시도
- **테스트**:
  1. 트레이딩 시작
  2. 창 닫기(X) 버튼 클릭
- **기대 결과**:
  - "종료 확인" 다이얼로그
  - "트레이딩이 실행 중입니다. 정말 종료하시겠습니까?" 메시지
  - "아니오" 클릭 시 창 닫히지 않음
  - "예" 클릭 시 프로그램 종료

### 7-3. 트레이딩 중지 상태에서 종료
- **테스트**:
  1. 트레이딩 중지 상태
  2. 창 닫기(X) 버튼 클릭
- **기대 결과**:
  - 확인 없이 즉시 종료

---

## 8. UI 일관성 테스트

### 8-1. 창 크기 조절 테스트
- **테스트**: 창 크기를 크게/작게 조절
- **기대 결과**:
  - 최소 크기(800x600) 이하로 줄어들지 않음
  - 레이아웃이 비율에 맞게 조정됨

### 8-2. 긴 로그 메시지 테스트
- **테스트**: 여러 작업 반복하여 로그 많이 쌓기
- **기대 결과**:
  - 스크롤바 생성
  - 자동 스크롤 유지
  - UI 깨지지 않음

### 8-3. 한글 표시 테스트
- **테스트**: 모든 한글 메시지 확인
- **기대 결과**:
  - 한글이 정상적으로 표시됨
  - 깨진 문자 없음

---

## 테스트 체크리스트

### 필수 테스트 (반드시 통과해야 함):
- [ ] 1-1. GUI 실행 확인
- [ ] 2-6. API 연결 테스트 ✅
- [ ] 2-7. API 설정 저장
- [ ] 3-4. 새로고침 버튼 (프리징 없음) ✅
- [ ] 4-3. 트레이딩 시작
- [ ] 4-4. 트레이딩 중지
- [ ] 7-2. 트레이딩 실행 중 종료 확인

### 선택적 테스트 (Telegram 사용 시):
- [ ] 2-14. Telegram 알림 테스트
- [ ] 2-15. Telegram 설정 저장

### 권장 테스트 (전체 기능 확인):
- [ ] 모든 테스트 항목

---

## 버그 발견 시

버그 발견 시 다음 정보를 기록해주세요:

1. **테스트 번호**: (예: 3-4)
2. **증상**: 무슨 문제가 발생했는가?
3. **재현 방법**: 어떤 순서로 했을 때 발생하는가?
4. **에러 메시지**: 에러 메시지가 있다면 전체 복사
5. **CMD 출력**: 터미널에 에러가 있다면 복사

---

## 테스트 완료 후

모든 테스트 통과 시:
- ✅ Phase 3.7 GUI 구현 완료!
- 다음 단계: Phase 3.8 (Trading Engine과 GUI 통합) 또는 Phase 3.5 (Paper Trading 24시간 검증)
